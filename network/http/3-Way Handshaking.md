# 3-Way Handshaking

TCP 통신을 사용시 사용하는 기법

TLS Handshaking

## 과정

1. client 에서 SYN을 server에 보낸다 
2. server에서 SYN과 ACK를 합쳐서 client에게 보낸다
3. client에서 ACK를 server에게 보낸다 
4. server에 ACK를 정확하게 받았다면 연결이 안정적이다
5. client와 server간 요청 응답을 하게된다

UDP는 사용하지 않아서 연결이 안정적이지는 않지만 빠르다는 장점이 있다 



## 이후 과정

1. 암호키를 server에서 client에게 보낸다

2. 이때 암호키는 공개키로 되어있고 복호키는 비밀키로 되어있음(비대칭 키 방식)

   - 예시)

     - 암호키는 소수가 곱해진 답과 같은 숫자라면 복호키는 답이나오기위한 곱한 숫자들을 뜻함

     - 이러면 암호키가 공개가 되어도 복호키를 알기 어려워 해석을 할 수 없게 된다

     - 즉, 복호키를 가진 server에서만 복호화를 할 수 있게 된다 

3. client는 암호키를 이용하여 암호화된 예비 마스터 암호를 보낸다

4. server는 복호키를 이용하여 암호화된 예비 마스터 암호를 해석하게 된다  

5. 예비 마스터 암호로 세션키를 생성

6. 클라이언트에서 세션키로 암호화한 '완료' 메시지와 서버에서 암호화한 '완료' 메시지가 전송된다

7. 핸드셰이크가 완료, 세션키로 통신을 하게된다 





참조 www.cloudflare.com 







