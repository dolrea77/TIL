# 코틀린 기초



## 스코프

변수, 함수, 클래스 같은 맴버들을 서로 공유하여 사용할 수 있는 범위를 지정해 둔 단위

규칙 

- 스코프 외부에서는 스코프 내부의 맴버를 참조연산자('.')로만 참조가 가능 
- 동일 스코프내에서는 맴버들을 공유 할 수 있다 
- 하위 스코프에서는 상위 스코프의 맴버를 재정의 할 수 있음 



## 접근제한자

스코프 외부에서 스코프 내부에 접근할 때 그 권한을 개발자가 제어 할 수 있는 기능 



종류 

- public
  - 패키지 스코프
    - 어떤 패키지에서도 접근 가능 (기본값)
  - 클래스 스코프
    - 클래스 외부에서 늘 접근 가능(기본값)
- internal 
  - 패키지 스코프
    - 같은 모듈 내에서만 접근 가능 
  - 클래스 스코프
    - 사용하지 않음
- private
  - 패키지 스코프 
    - 같은 파일 내에서만 접근 가능 
  - 클래스 스코프
    - 클래스 내부에서만 접근 가능
- protected
  - 패키지 스코프  
    - 사용하지 않음 
  - 클래스 스코프
    - 클래스 자신과 상속 받은 클래스에서 접근 가능 



## 고차함수와 람다함수



### 고차 함수

함수를 클래스에서 만들어낸 인스턴스처럼 취급하는 방법 



```kotlin
fun main(){
    b(::a)						  // :: 일반 함수를 고차함수로 변경해 주는 연산자
}

fun a(str: String){
    println("$str 함수 a")
}

fun b(function:(String)->Unit){   // 사용예정인 함수 a 는 입력이 String이며 반환값이 없으므로 Unit을 사용 
    function("b가 호출한")
}
```



### 람다 함수

- 일반 함수와 달리 그 자체가 고차함수 임 
- 람다함수도 여러줄 가능
  - 대신 마지막 구문은 반환 값
- 람다함수에 파라미터가 없다면 
  - val a:()->Unit={println("aa")}
- 패러미터가 하나뿐이라면 it 사용가능

```kotlin
fun main(){
// 일반적인 자료형과 같이 함수의 형식 사용 (함수에 들어가는 모든 자료형)->반환값(없으면 Unit)={패러미터 변수명->실행구문}
	val c: (String)->Unit ={str -> println("$str 람다함수")}
    // val c ={str:String->println("$str 람다함수")}
    // val c: (String)->Unit = {println("$it 람다함수")}
    b(c)
}

fun b(function:(String)->Unit){   // 사용예정인 함수 a 는 입력이 String이며 반환값이 없으므로 Unit을 사용 
    function("b가 호출한")
}
```



## 스코프 함수

함수형 언어의 특징을 좀 더 편리하게 사용할 수 있도록 기본 제공하는 함수들

종류

- apply
  - 인스턴스를 생성한 후 변수에 담기 전 초기화 과정을 수행할 때 사용  
  - main함수와 별도의 스코프에서 인스턴스의 변수와 함수를 조작하므로 코드가 깔끔해진다는 장점이 있음 
  - 처리가 끝나면 인스턴스 반환
- run
  - apply와 마찬가지로 스코프 안에서 참조연산자를 사용하지 않음
  - 인스턴스 대신 마지막 구문(최종)을 반환된다는 것이 apply와의 차이점
  - 이미 인스턴스가 만들어지고 인스턴스의 함수나 속성을 스코프 내에서 사용해야 할 때 유용
- with 
  - run과 동일한 기능을 가짐 
  - 대신 인스턴스를 참조연산자 대신 패러미터로 받음
- also
  - 처리가 끝나면 인스턴스를 반환
  - apply와 유사
- let 
  - 처리가 끝나면 최종값을 반환
  - run과 유사 
  - 현재 속해있는 스코프에  있는 변수와 클래스에서 쓰는 변수 이름이 같을 때 클래스에 있는 변수를 사용한다는 'it'을 사용해줌 



```kotlin
fun main(){
    // main에 속해있는 run함수는 같은 main에 속해있는 price를 우선으로 생각함 
    var price = 5000
    
    //apply 
    var a = Book("aaa", 10000).apply{
        name = "세일" + name
		discount()
    }
    //a.name = "세일" + a.name
    //a.discount()
    
    //run
    a.run{
        println("상품명:${name}, 가격:${price}원")
    }
    
    //with
    with(a){
        println("상품명:${name}, 가격:${price}원")
    }
    
    //let
    a.let{
        println("상품명:${it.name}, 가격:${it.price}원")
    }
    
}

class Book(var name:String, var price:Int){
    fun discount(){
        price -= 2000
    }
}
```

