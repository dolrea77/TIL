# 가상 돔(Virtual DOM)

- 실제 돔과 같은 내용을 가지고 있는 복사본 
- 복사본은 돔이 아닌 자바스크립트의 객체 형태로 메모리에 저장된다 
- 가상돔은 브라우저에 있는 문서에 직접적으로 접근 할 수 없음 



## DOM 조작

- 웹 브라우저에 보이는 화면을 바꾸어 주려면 DOM을 조작하여 바꾸어 준다 

- 과정

  1. 브라우저가 HTML을 탐색 

  2. 해당 엘리먼트와 자식 엘리먼트를 돔에서 삭제(API를 이용해 해당 돔으로 접근)

  3. 새롭게 수정된 엘리먼트로 교체 

  4. css 계산 및 layout정보 수정 

  5. 수정된 정보에 따라 새롭게 렌더링

     => 한 동작에서 여러 수정사항 발생시 1개의 수정사항 마다 렌더링을 해준다 



## react의 가상 돔 조작

- 가상 돔은 자바스크립트 객체이기 때문에 일반 돔 처럼 엘리먼트에 접근하기 위한 API를 사용하지 않음 

- 가상돔은 두개의 복사본을 객체로 가지고 있다 

  - 렌더링 이전(변경전) 가상돔
  - 렌더링 이후(변경후) 가상돔

- 과정

  1. 리엑트에서 state의 변화 같은 렌더링이 발생하는 상황이 생기면 렌더링 직전 변경된 내용의 가상돔이 생성되게 된다 

  2. 변경전 가상돔과 변경후 가상돔을 비교하여 변경이 일어난 엘리먼트 만을 찾아낸다 (Diffing)

  3. 바뀐 엘리먼트만을 실제 돔에 적용시켜준다 (Reconciliation) 

     => Batch Update : 한 동작에서 일어난 수정사항을 한번에 변경하여 렌더링 해준다 